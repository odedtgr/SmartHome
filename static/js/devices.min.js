$("select").on("change",function(a,b){device_changed($(this))});$(".form-control").on("change",function(a,b){device_changed($(this))});$(".toggle_div").on("click",function(a,b){device_changed($(this))});$("button").on("click",function(){$(this).closest(".btn-group").find("button").removeClass("active");$(this).addClass("active");if($(this).parent(".btn-group").attr("val")==="scheduler"){update_scheduler($(this).attr("val")==="true")}else{device_changed($(this))}});function device_changed(a){if(a.parent(".btn-group").attr("ignore")==="true"){return}if(a.attr("ignore")==="true"){return}device_row=a.closest(".row");device_type=device_row.attr("device-type");device_name=device_row.attr("device-name");if(device_type==="temperature"){return}else{if(device_type==="Shutter"||device_type==="ShutterNew"){a.removeClass("btn-primary").addClass("btn-alert");attr=Shutter_attr(device_row)}else{if(device_type==="Boiler"){attr=Boiler_attr(device_row)}else{if(device_type==="AirConditioner"){attr=AirConditioner_attr(device_row,a.find(".deviceOn").attr("val")==="device_on")}else{if(device_type==="Light"){attr=Light_attr(device_row);$(device_row).find(".btn-danger").removeClass("btn-danger").addClass("btn-default");$(device_row).find(".btn-primary").removeClass("btn-primary").addClass("btn-default")}}}}}update_device_websoc(device_name,attr)}function update_device_gui(a,b,c){if(c=="Boiler"){update_Boiler_gui(b,a)}else{if(c=="AirConditioner"){update_AirConditioner_gui(b,a)}else{if(c=="Shutter"||c=="ShutterNew"){update_Shutter_gui(b,a)}else{if(c=="temperature"){update_temperature_gui(b,a)}else{if(c=="Light"){update_Light_gui(b,a)}else{if(c=="BoilerTemperature"){update_bolier_temperature_gui(b,a)}}}}}}}function update_Boiler_gui(b,a){device=document.getElementById(b);$(device).find(".T").html(a.Temp);$(device).find(".btn-group").find("button").removeClass("active");if(a.mode==0){$(device).find("[val=0]").addClass("active")}else{if(a.mode==3||a.mode==4||a.mode==5||a.mode==6){$(device).find("[val=4]").addClass("active")}else{$(device).find("[val=2]").addClass("active")}}}function update_AirConditioner_gui(b,a){device=document.getElementById(b);if(a.device_on=="true"||a.device_on=="True"){$(device).find(".deviceOn").prop("checked",true).change()}else{$(device).find(".deviceOn").prop("checked",false).change()}}function update_Shutter_gui(b,a){device=document.getElementById(b);$(device).find(".btn-group").find("button").removeClass("active");$(device).find(".btn-group").find("button").removeClass("btn-alert").addClass("btn-primary");if(a.mode==0||a.mode==25||a.mode==50||a.mode==75||a.mode==100){$(device).find(".status").html("");$(device).find("[val="+a.mode+"]").addClass("active")}else{$(device).find(".status").html(a.mode+"% Open")}}function update_temperature_gui(b,a){device=document.getElementById(b);$(device).find(".T").html("T= "+a.Temp+" C");$(device).find(".RH").html("RH= "+a.Rh)}function update_bolier_temperature_gui(b,a){device=document.getElementById(b);$(device).find(".T").html(" "+a.Temp)}function update_Light_gui(b,a){device=document.getElementById(b);if(a.device_on=="true"||a.on_off=="True"){$(device).find(".deviceOn").prop("checked",true).change();$(device).find(".btn").removeClass("btn-default").addClass("btn-danger")}else{$(device).find(".deviceOn").prop("checked",false).change();$(device).find(".btn").removeClass("btn-default").addClass("btn-primary")}}setInterval(function(){location="/"},120000);