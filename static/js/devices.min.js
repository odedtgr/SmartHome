$("select").on("change",function(a,b){device_changed($(this))});$(".form-control").on("change",function(a,b){device_changed($(this))});$(".toggle_div").on("click",function(a,b){device_changed($(this))});$("button").on("click",function(){$(this).closest(".btn-group").find("button").removeClass("active");$(this).addClass("active");if($(this).parent(".btn-group").attr("val")==="scheduler"){update_scheduler($(this).attr("val")==="true")}else{device_changed($(this))}});function device_changed(a){device_row=a.closest(".row");device_type=device_row.attr("device-type");device_id=device_row.attr("id");if(device_type==="temperature"){return}else{if(device_type==="shutter"||device_type==="shutterNew"){attr=shutter_attr(device_row)}else{if(device_type==="boiler"){attr=boiler_attr(device_row)}else{if(device_type==="air_conditioner"){attr=air_conditioner_attr(device_row,a.find(".deviceOn").attr("val")==="on_off")}else{if(device_type==="light"){attr=light_attr(device_row)}}}}}update_device(device_id,attr)}function update_device_gui(b,a){if(b.type=="boiler"){update_boiler_gui(b.id,a)}else{if(b.type=="air_conditioner"){update_air_conditioner_gui(b.id,a)}else{if(b.type=="shutter"||b.type=="shutterNew"){update_shutter_gui(b.id,a)}else{if(b.type=="temperature"){update_temperature_gui(b.id,a)}else{if(b.type=="light"){update_light_gui(b.id,a)}}}}}}function update_boiler_gui(b,a){device=document.getElementById(b);$(device).find(".btn-group").find("button").removeClass("active");if(a.mode==0||a.mode==4){$(device).find("[val=4]").addClass("active")}else{if(a.mode==1){$(device).find("[val=1]").addClass("active")}else{$(device).find("[val=3]").addClass("active")}}}function update_air_conditioner_gui(b,a){device=document.getElementById(b);if(a.on_off=="true"||a.on_off=="True"){$(device).find(".deviceOn").prop("checked",true).change()}else{$(device).find(".deviceOn").prop("checked",false).change()}}function update_shutter_gui(b,a){device=document.getElementById(b);$(device).find(".btn-group").find("button").removeClass("active");if(a.mode==0||a.mode==25||a.mode==50||a.mode==75||a.mode==100){$(device).find(".status").html("");$(device).find("[val="+a.mode+"]").addClass("active")}else{$(device).find(".status").html(a.mode+"% Open")}}function update_temperature_gui(b,a){device=document.getElementById(b);$(device).find(".T").html("T= "+a.Temp+" C");$(device).find(".RH").html("RH= "+a.Rh)}function update_light_gui(b,a){device=document.getElementById(b);if(a.device_on=="true"||a.on_off=="True"){$(device).find(".deviceOn").prop("checked",true).change()}else{$(device).find(".deviceOn").prop("checked",false).change()}}setInterval(function(){location="/"},120000);