<div id="{{device.id}}" class="row" device-type="{{device.type}}">
    {% if show_device_label %}
    <div class="col-xs-12 col-lg-2">
        {{ device.name }}
    </div>
    {% endif %}

    <div class="col-xs-6 col-lg-2">
        <div class="btn-group" role="group" aria-label="Mode" val="mode">
            <button type="button" class="btn btn-primary {{'active' if (device.last_config['mode'] == '0' or device.last_config['mode'] == '4')}}" aria-label="4" val="4">Off</button>
            <button type="button" class="btn btn-alert {{'active' if device.last_config['mode'] == '1'}}" aria-label="1" val="1">Auto</button>
            <button type="button" class="btn btn-alert {{'active' if (device.last_config['mode'] == '2' or device.last_config['mode'] == '3')}}" aria-label="3" val="3">On</button>
        </div>
    </div>

    <div class="col-xs-5 col-lg-3">
        <script>
            //Display the time the water heater was on, but only if it was today.
            var today = new Date().toJSON().slice(0,10);
            var yesterday = new Date();
            yesterday.setDate(yesterday.getDate()-1);
            yesterday = yesterday.getFullYear() + '-' + ('0' + (yesterday.getMonth()+1)).slice(-2) + '-' + ('0' + yesterday.getDate()).slice(-2);
            var boiler_date = '{{device.last_config['date']}}'
            var mode = {{device.last_config['mode']}}
            if (today.localeCompare(boiler_date)==0)
            {
                if (mode == 0){
                    document.write('{{"Last on at {}".format(device.last_config['time'])}}')
                }else{
                    document.write('{{"Started on {}".format(device.last_config['time'])}}')
                }
            }
            else if (yesterday.localeCompare(boiler_date)==0)
            {
                if (mode == 0){
                    document.write('{{"Last on yesterday at {}".format(device.last_config['time'])}}')
                }
            }
        </script>
    </div></div>

    

